/*C3*/SET SCHEMA PUBLIC
CREATE TABLE IF NOT EXISTS IDB_PORTFOLIO (id VARCHAR(50) PRIMARY KEY, portfolio_id VARCHAR(50))
CREATE TABLE  IF NOT EXISTS IDB_PORTFOLIO_STATE (snapshot_id VARCHAR(50) PRIMARY KEY,entity_id VARCHAR(50) FOREIGN KEY REFERENCES IDB_PORTFOLIO (id), valid_from TIMESTAMP,valid_to TIMESTAMP, name VARCHAR(50), currency VARCHAR(3))
CREATE TABLE  IF NOT EXISTS IDB_YIELDCURVE(id VARCHAR(50) PRIMARY KEY, currency VARCHAR(3),at_date TIMESTAMP)
CREATE TABLE  IF NOT EXISTS IDB_YIELDCURVE_STATE (snapshot_id VARCHAR(100) PRIMARY KEY,entity_id VARCHAR(50) FOREIGN KEY REFERENCES IDB_YIELDCURVE (id), valid_from TIMESTAMP,valid_to TIMESTAMP, three_months DOUBLE, six_months DOUBLE, one_year DOUBLE,two_years DOUBLE, five_years DOUBLE, ten_years DOUBLE, thirty_years DOUBLE)
CREATE TABLE IF NOT EXISTS IDB_FxQuote(id VARCHAR(50) PRIMARY KEY, from_currency VARCHAR(3),to_currency VARCHAR(3), at_date TIMESTAMP)
CREATE TABLE IF NOT EXISTS IDB_FxQuote_STATE(snapshot_id VARCHAR(100) PRIMARY KEY,entity_id VARCHAR(50) FOREIGN KEY REFERENCES IDB_FxQuote (id), valid_from TIMESTAMP,valid_to TIMESTAMP, value DOUBLE)
CREATE TABLE IF NOT EXISTS IDB_Transaction(id VARCHAR(50) PRIMARY KEY, transaction_id VARCHAR(50))
CREATE TABLE  IF NOT EXISTS IDB_Transaction_STATE (snapshot_id VARCHAR(100) PRIMARY KEY,entity_id VARCHAR(50) FOREIGN KEY REFERENCES IDB_Transaction (id), valid_from TIMESTAMP,valid_to TIMESTAMP, name VARCHAR(50), volume DOUBLE, paidAmount DOUBLE,currency VARCHAR(3), sender VARCHAR(50), receiver VARCHAR(50), positionId VARCHAR(50))
CREATE TABLE IF NOT EXISTS IDB_InstrumentPriceQuote (id VARCHAR(100) PRIMARY KEY,instrument_id VARCHAR(50), at_date TIMESTAMP)
CREATE TABLE IF NOT EXISTS IDB_InstrumentPriceQuote_STATE(snapshot_id VARCHAR(100) PRIMARY KEY,entity_id VARCHAR(50) FOREIGN KEY REFERENCES IDB_InstrumentPriceQuote(id),valid_from TIMESTAMP, valid_to TIMESTAMP, instrument_price Double,currency VARCHAR(3))
CREATE TABLE IF NOT EXISTS IDB_Instrument(id VARCHAR(100) PRIMARY KEY, instrument_id VARCHAR(50))
CREATE TABLE  IF NOT EXISTS IDB_Instrument_STATE(snapshot_id VARCHAR(100) PRIMARY KEY,entity_id VARCHAR(50) FOREIGN KEY REFERENCES IDB_Instrument(id),valid_from TIMESTAMP, valid_to TIMESTAMP,instrument_type VARCHAR(15), isin VARCHAR(50), currency VARCHAR(3),market VARCHAR(50),tenorMonths INTEGER, interestRate DOUBLE, issue TIMESTAMP, frequency VARCHAR(15),maturity TIMESTAMP)
CREATE TABLE IF NOT EXISTS IDB_Position(id VARCHAR(100) PRIMARY KEY, position_id VARCHAR(50))
CREATE TABLE IF NOT EXISTS IDB_Position_STATE(snapshot_id VARCHAR(100) PRIMARY KEY,entity_id VARCHAR(50) FOREIGN KEY REFERENCES IDB_Position(id),valid_from TIMESTAMP, valid_to TIMESTAMP,name VARCHAR(50), longSide VARCHAR(50), shortSide VARCHAR(50), portfolioId VARCHAR(50),instrument VARCHAR(50) NOT NULL)
